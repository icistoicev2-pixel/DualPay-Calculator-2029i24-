<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DualPay Calculator</title>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#228B22">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: #E0F2F7;
      font-family: Montserrat, sans-serif;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center">

  <main class="bg-white rounded-3xl shadow-xl p-6 w-full max-w-md text-center">
    <h1 class="text-2xl font-bold mb-4">DualPay Calculator</h1>

    <input id="amountDue" type="number" placeholder="Сума" class="w-full p-4 text-xl rounded-xl border mb-4">

    <div class="flex gap-2 mb-4">
      <input id="paidBGN" type="number" placeholder="лв" class="w-1/2 p-3 border rounded-lg">
      <input id="paidEUR" type="number" placeholder="€" class="w-1/2 p-3 border rounded-lg">
    </div>

    <div class="text-xl font-bold">
      Ресто: <span id="result">0.00</span> лв
    </div>
  </main>

  <script>
    const RATE = 1.95583;
    const due = document.getElementById('amountDue');
    const bgn = document.getElementById('paidBGN');
    const eur = document.getElementById('paidEUR');
    const result = document.getElementById('result');

    function calc() {
      const dueVal = parseFloat(due.value) || 0;
      const paid = (parseFloat(bgn.value) || 0) + (parseFloat(eur.value) || 0) * RATE;
      const change = paid - dueVal;
      result.textContent = change.toFixed(2);
    }

    due.oninput = bgn.oninput = eur.oninput = calc;

    // SERVICE WORKER
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }
  </script>

</body>
</html>
